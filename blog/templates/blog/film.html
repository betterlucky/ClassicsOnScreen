{% extends "base.html" %}

{% block page_title %}
<h2 class="mb-4">{{ film }}</h2>
{% endblock page_title %}

{% block page_content %}
{% block shows %}
    {% regroup shows by eventtime.date as shows_by_date %}
    
    {% for date_group in shows_by_date %}
        <h3>{{ date_group.grouper|date:"l, F j, Y" }}</h3>
        <ul>
            {% for show in date_group.list %}
                <li>
                    {{ show.eventtime|time:"g:i A" }} - 
                    <a href="{% url 'blog_location' show.location.name %}">
                        {{ show.location.name }}
                    </a>
                    <p>{{ show.body|slice:":400" }}...</p>
                    <p>Event suggested by 
                        <a href="{% url 'user_shows' show.created_by %}"> {{ show.created_by }} </a> 
                        on {{ show.created_on|date:"F j, Y" }}
                    </p>
                </li>
            {% endfor %}
        </ul>
    {% endfor %}
{% endblock shows %}
{% endblock page_content %}
